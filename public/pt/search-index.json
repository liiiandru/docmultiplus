[{"content":"Bem-vindo ao Portal de Integra√ß√£o da Multiplus Card Este portal re√∫ne toda a documenta√ß√£o necess√°ria para integrar a automa√ß√£o comercial com as solu√ß√µes da Multiplus Card. Aqui, voc√™ encontrar√° guias detalhados, exemplos de c√≥digo e boas pr√°ticas para diferentes formas de integra√ß√£o, garantindo que sua aplica√ß√£o possa se conectar de forma segura e eficiente.\nNossas Solu√ß√µes de Integra√ß√£o A Multiplus Card oferece diversas op√ß√µes de integra√ß√£o para atender √†s diferentes necessidades do seu sistema:\nTEF Dial ‚Äì Solu√ß√£o baseada em troca de arquivos para a comunica√ß√£o com o TEF. DLL Modo Client ‚Äì Integra√ß√£o direta via DLL, permitindo comunica√ß√£o eficiente entre sua aplica√ß√£o e os servi√ßos da Multiplus Card. DLL Modo Interativo ‚Äì Solu√ß√£o que possibilita uma intera√ß√£o mais flex√≠vel entre seu sistema e o processo de pagamento. Web Service ‚Äì API baseada em HTTP para integra√ß√£o com sistemas web e aplica√ß√µes em nuvem. QRMultiplus (PIX) ‚Äì Pagamentos via QR Code utilizando a tecnologia PIX. LinkPago (Gateway de Pagamento) ‚Äì Integra√ß√£o com o gateway de pagamento da Multiplus Card para diversas formas de pagamento. Conciliador ‚Äì Ferramenta para confer√™ncia e concilia√ß√£o financeira das transa√ß√µes realizadas. Flexibilidade para Diferentes Tecnologias Nosso objetivo √© facilitar a integra√ß√£o, independentemente da linguagem ou plataforma utilizada no seu projeto. Por isso, oferecemos suporte para diversas tecnologias, como:\nC# / .NET Java Delphi VB6 PHP JavaScript / Node.js Outras tecnologias compat√≠veis Al√©m disso, disponibilizamos exemplos de c√≥digo para cada tipo de integra√ß√£o, ajudando voc√™ a implementar as funcionalidades de maneira r√°pida e eficiente.\nComece Agora! Navegue pelo menu lateral para acessar a documenta√ß√£o espec√≠fica de cada integra√ß√£o. Caso precise de suporte ou tenha d√∫vidas, entre em contato com nossa equipe t√©cnica.\nüöÄ Acelere sua integra√ß√£o com a Multiplus Card e ofere√ßa uma experi√™ncia de pagamento completa aos seus clientes!\n","date":"2023-09-07","id":0,"permalink":"/pt/","summary":"\u003ch1 id=\"bem-vindo-ao-portal-de-integra√ß√£o-da-multiplus-card\"\u003eBem-vindo ao Portal de Integra√ß√£o da Multiplus Card\u003c/h1\u003e\n\u003cp\u003eEste portal re√∫ne toda a documenta√ß√£o necess√°ria para integrar a automa√ß√£o comercial com as solu√ß√µes da \u003cstrong\u003eMultiplus Card\u003c/strong\u003e. Aqui, voc√™ encontrar√° guias detalhados, exemplos de c√≥digo e boas pr√°ticas para diferentes formas de integra√ß√£o, garantindo que sua aplica√ß√£o possa se conectar de forma segura e eficiente.\u003c/p\u003e","tags":[],"title":""},{"content":"","date":"2023-09-07","id":1,"permalink":"/pt/privacy/","summary":"","tags":[],"title":"Pol√≠tica de Privacidade"},{"content":"A DLL TefClientMC proporciona uma integra√ß√£o flex√≠vel, permitindo √† automa√ß√£o um alto n√≠vel de controle sobre o fluxo da transa√ß√£o e ampla personaliza√ß√£o por meio de um processo iterativo. √â ideal para automa√ß√µes que buscam preservar sua identidade visual e ter maior controle sobre cada etapa da transa√ß√£o.\nRequisitos para Execu√ß√£o Para a execu√ß√£o da DLL, √© necess√°rio que os seguintes componentes de software estejam instalados:\nMicrosoft .Net Framework 4.6.2 (download) Microsoft Visual C++ 2015-2022 Redistributable (download) Para garantir o funcionamento adequado da DLL, o ambiente deve atender aos seguintes requisitos m√≠nimos:\nWindows 7 SP1 Processador Intel Core i3 3GB de mem√≥ria RAM 1GB de espa√ßo dispon√≠vel no HD 1 porta USB para a conex√£o do Pinpad Para um melhor desempenho e establididade recomendamos a seguinte configura√ß√£o:\nWindows 10 ou superior Processador Intel Core i3, AMD Ryzen 3 ou superior 4GB de mem√≥ria RAM 1,5GB de espa√ßo dispon√≠vel no SSD 1 porta USB para a conex√£o do Pinpad Fluxo de Utiliza√ß√£o A integra√ß√£o com a DLL TefClientMC ocorre por meio da implementa√ß√£o das fun√ß√µes b√°sicas de comunica√ß√£o da biblioteca. O processo de transa√ß√£o se inicia com a chamada da fun√ß√£o IniciaFuncaoMCInterativo.\nAo chamar essa fun√ß√£o com os par√¢metros adequados (detalhados posteriormente), deve-se verificar o retorno. Se for 0, o processo continua normalmente; caso contr√°rio (retorno maior que 0), a transa√ß√£o deve ser encerrada.\nEm seguida, dentro de um la√ßo de repeti√ß√£o, a fun√ß√£o AguardaFuncaoMCInterativo √© chamada. Essa fun√ß√£o retorna um BSTR contendo informa√ß√µes essenciais para a transa√ß√£o. Se o retorno for [ERROABORTAR] ou [ERRODISPLAY], o processo deve ser interrompido imediatamente. Caso contr√°rio, a comunica√ß√£o prossegue por meio da fun√ß√£o ContinuaFuncaoMCInterativo. O la√ßo se encerra quando AguardaFuncaoMCInterativo retorna a tag [RETORNO].\nAp√≥s o recebimento dessa tag, deve-se imprimir o comprovante da transa√ß√£o, armazenar suas informa√ß√µes e, por fim, chamar a fun√ß√£o FinalizaFuncaoMCInterativo, confirmando assim a transa√ß√£o.\nSe for necess√°rio cancelar a transa√ß√£o a qualquer momento, a fun√ß√£o CancelarFluxoMCInterativo pode ser chamada. Essa fun√ß√£o retorna 0 em caso de sucesso e interrompe imediatamente o fluxo da transa√ß√£o.\nO retorno das fun√ß√µes indica o sucesso de sua execu√ß√£o. No caso espec√≠fico de FinalizaFuncaoMCInterativo, o resultado da confirma√ß√£o ou do cancelamento da transa√ß√£o pode ser obtido por meio da fun√ß√£o AguardaFuncaoMCInterativo ou pela verifica√ß√£o do status da transa√ß√£o.\nRetorno Fun√ß√£o INT IniciaFuncaoMCInterativo *BSTR AguardaFuncaoMCInterativo INT ContinuaFuncaoMCInterativo INT FinalizaFuncaoMCInterativo INT CancelarFluxoMCInterativo *Informa√ß√µes sobre o tipo BSTR (Clique aqui)\n(diagrama)\nObserva√ß√µes sobre o Processo Iterativo Durante a execu√ß√£o do la√ßo de repeti√ß√£o, evite a inclus√£o de delays, sleeps ou qualquer instru√ß√£o que possa resultar em atrasos na execu√ß√£o. Isso √© crucial, pois pode levar √† perda de dados ou ao encerramento inesperado da execu√ß√£o. As chamadas para a fun√ß√£o AguardaFuncaoMCInterativo devem ser feitas de maneira cont√≠nua, com tratamento adequado para cada tag. Se uma mensagem for exibida pela automa√ß√£o e voc√™ receber uma nova mensagem ou algum outro retorno, substitua a mensagem anterior apenas nesses casos. Durante o processo, √© importante estar ciente de que em certos momentos, podem ser retornadas strings vazias.\nInstala√ß√£o/Configura√ß√£o Esta solu√ß√£o foi desenhada para funcionar no modelo standalone, ou seja, todos os componentes requeridos devem estar instalados no mesmo dispositivo (disco C:\\). As fun√ß√µes TEF somente podem ser executadas atrav√©s de um equipamento que possua o Pinpad, conex√£o de banda larga e a solu√ß√£o instalada.\nPara o funcionamento da DLL s√£o necess√°rios que os arquivos da DLL e o ConfigMC.ini estejam presentes na mesma pasta em que est√° o execut√°vel do sistema. O Conte√∫do do arquivo ConfigMC.ini, deve apontar o caminho da pasta onde est√° o execut√°vel ClientD.exe.\nConfigMC.ini\rCAMINHO=C:\\ClientD\rO arquivo CliMC.ini deve estar presente na pasta em que o execut√°vel ClientD.exe foi instalado, nele s√£o adicionadas as configura√ß√µes relacionadas ao Pinpad, confirma√ß√£o de transa√ß√µes, venda digitada, etc. A seguir um exemplo de como deve ser o arquivo e os campos b√°sicos que devem ser configurados.\nCliMC.ini\rPorta=3 MensagemPadrao=MUTLIPLUS CARD TransacoesAdicionaisHabilitadas=29 ConfirmacaoAutomatica=SIM\rCampo Valor Descri√ß√£o Porta N√∫mero da porta ou AUTO_USB para identificar de forma autom√°tica Configura√ß√£o de porta do Pinpad MensagemPadrao Texto Mensagem padr√£o exibida na tela do Pinpad TransacoesAdicionaisHabilitadas Verificar configura√ß√µes adicionais Configura√ß√µes referente a servi√ßos disponibilizados ConfirmacaoAutomatica SIM/NAO Realiza a confirma√ß√£o autom√°tica de todas as transa√ß√µes realizadas (a op√ß√£o deve ter o valor NAO, quando s√£o realizadas transa√ß√µes com m√∫ltiplos cart√µes) NomeImpressora Nome da Impressora selecionada Par√¢metro gerado automaticamente ao salvar a impressora padr√£o do QR Code Configura√ß√µes Adicionais Valores configura√ß√µes adicionais\nC√≥digo Descri√ß√£o 29 Opcional, habilita venda cr√©dito digitada (em alguns cart√µes n√£o √© permitido esse modo de utiliza√ß√£o) 42 Opcional habilita venda d√©bito digitada (em alguns cart√µes n√£o √© permitido esse modo de utiliza√ß√£o) Requisitos de Execu√ß√£o Para que o funcionamento da DLL ocorra de forma correta √© necess√°rio que a automa√ß√£o seja executada em Modo Administrador, caso n√£o seja seguido erros poder√£o ser ocasionados. A aplica√ß√£o ClientD.exe tamb√©m deve estar configurada para executar em Modo Administrador.\nProcesso de Atualiza√ß√£o A aplica√ß√£o ClientD.exe √© atualizada automaticamente em momentos estrat√©gicos, ou seja, quando n√£o est√° realizando transa√ß√µes. Se, por algum motivo, estiver em processo de atualiza√ß√£o e uma transa√ß√£o for iniciada, voc√™ receber√° o c√≥digo de erro 41. Nesse caso, tente realizar a transa√ß√£o novamente at√© que o erro n√£o seja mais retornado. No entanto, a DLL TefClientMC requer uma atualiza√ß√£o manual, pois tem um impacto direto na automa√ß√£o. Em caso de mudan√ßas significativas na vers√£o disponibilizada (break changes), haver√° um aviso no Portal. Sempre √© recomend√°vel testar as novas vers√µes antes de liberar a automa√ß√£o para produ√ß√£o.\nFun√ß√µes da DLL IniciaFuncaoMCInterativo Esta fun√ß√£o d√° inicio ao processo de transa√ß√£o, seja com cart√£o, Pix ou administrativa, somente em algumas exce√ß√µes que ela n√£o √© utilizada. Seus par√¢metros s√£o os seguintes:\nTipo Nome Descri√ß√£o INT iComando Comando para executar uma opera√ß√£o, por ex.: venda Cr√©dito, D√©bito, verifique na tabela seguinte todos os comandos dispon√≠veis STRING sCnpjCliente CNPJ do Cliente (apenas n√∫meros ex.: 12345678000100) INT iParcela N√∫mero de Parcelas STRING sCupom N√∫mero do cupom fiscal (At√© 6 caracteres, Ex:123456) STRING sValor Valor da transa√ß√£o utilizando virgula como separador, ex.: 100,00 STRING sNSU N√∫mero do NSU gerado pela frente de caixa (At√© 6 caracteres, Ex:123456) STRING sData Data da transa√ß√£o no seguinte formato yyyyMMdd, ex.: 20211207 STRING sNumeroPDV N√∫mero do PDV que est√° realizando a transa√ß√£o. STRING sCodigoLoja C√≥digo da Loja (Solicitar para Multiplus Card) INT iTipoComunica√ß√£o Par√¢metro de comunica√ß√£o, preencher com 0 STRING sParametro Preencher com uma string vazia ‚Äú‚Äù, string caso n√£o seja utilizado Prot√≥tipo da Fun√ß√£o\rint IniciaFuncaoMCInterativo(int iComando, string sCnpjCliente, int iParcela, string sCupom, string sValor, string sNsu, string sData, string sNumeroPDV, string sCodigoLoja, int iTipoComunicacao, string sParametro)\rC√≥digos de Erro Quando executada corretamente a fun√ß√£o retorna 0, e o fluxo deve continuar; caso ocorra algum erro ser√£o retornados um dos c√≥digos da tabela a seguir:\nC√≥digo Descri√ß√£o 0 Retorno OK (fun√ß√£o foi executada sem erros) 1 Erro gen√©rico na execu√ß√£o 30 N√£o foi encontrado o caminho do ClientD.exe 31 ConfigMC.ini est√° vazio 32 ClientD.exe n√£o encontrado 33 ClientD.exe n√£o est√° em execu√ß√£o 34 Erro ao iniciar ClientD.exe 35 Erro interno do ClientD.exe 36 Erro interno do ClientD.exe 37 Erro na leitura do arquivo ConfigMC.ini 38 Valor da transa√ß√£o com formato incorreto 39 Execut√°vel de envio de transa√ß√µes n√£o encontrado 40 CNPJ Inv√°lido ou no formato incorreto 41 ClientD.exe est√° em processo de atualiza√ß√£o 42 A automa√ß√£o n√£o est√° sendo executada no modo administrador 43 ClientD.exe est√° em execu√ß√£o devido a uma transa√ß√£o anterior 44 Par√¢metros ausentes em opera√ß√£o que utiliza o sParametro 45 Par√¢metros no formato incorreto em opera√ß√£o que utiliza o sParametro 46 Erro ao identificar localiza√ß√£o da DLL 47 N√£o Foi encontrada a localiza√ß√£o da DLL 48 N√£o houve confirma√ß√£o da conclus√£o da execu√ß√£o do ClientD 49 N√∫mero de parcelas inv√°lido 52 C√≥digo de opera√ß√£o inv√°lido para a fun√ß√£o C√≥digos de Opera√ß√£o Para utilizar as fun√ß√µes dispon√≠veis, informe um dos c√≥digos da tabela abaixo no par√¢metro iComando. A maioria das fun√ß√µes segue o mesmo fluxo; caso haja um fluxo alternativo, ele ser√° especificado.\nC√≥digo Descri√ß√£o 4 Venda D√©bito 20 Venda D√©bito a Vista 1 Venda Cr√©dito 0 Venda Cr√©dito a Vista 2 Venda Cr√©dito Parcelado Loja 3 Venda Cr√©dito Parcelado Adm 11 Venda Frota 18 Venda Voucher 9 Consulta saldo credito 10 Consulta saldo debito 15 Pr√© Autoriza√ß√£o 16 Confirma Pr√© Autoriza√ß√£o 17 Cancela Pr√© Autoriza√ß√£o 5 Cancelamento 6 Reimpress√£o 98 Confirma Transa√ß√£o 99 Desfaz Transa√ß√£o 110 Limpeza de Tabelas 200 Coleta de CPF 300 Relat√≥rio de Transa√ß√µes 400 Comprovante de Transa√ß√£o com POS 700 Status da Transa√ß√£o 806 Status do Pin Pad 807 Informa√ß√µes do Pin Pad Observa√ß√µes Sobre os C√≥digos de Opera√ß√£o Os c√≥digos de opera√ß√£o em sua maioria s√£o autoexplicativos, a seguir est√£o descritos alguns c√≥digos, e nomenclaturas que possam gerar d√∫vidas.\nVenda Cr√©dito e Venda Cr√©dito a Vista: a primeira op√ß√£o apresenta um menu para que seja escolhida a modalidade a vista ou parcelada; a segunda op√ß√£o inicia a venda √† vista.\nParcelado Loja e Parcelado Adm: A utiliza√ß√£o destas op√ß√µes est√° vinculada diretamente com a operadora do cliente, pois determina quem ir√° pagar os juros do parcelamento, dependendo da configura√ß√£o da operadora pode n√£o estar dispon√≠vel os dois tipos.\nLimpeza de Tabelas: Na primeira inicializa√ß√£o ou venda do dia, a operadora realiza uma atualiza√ß√£o das informa√ß√µes no Pinpad. Contudo, ao longo do dia, podem ocorrer erros que impedem a conclus√£o das transa√ß√µes, frequentemente manifestados atrav√©s da mensagem \u0026ldquo;Cart√£o Inv√°lido\u0026rdquo;. Nesses casos, uma solu√ß√£o poss√≠vel √© realizar uma atualiza√ß√£o for√ßada das tabelas, o que √© feito utilizando a fun√ß√£o \u0026ldquo;Limpeza de Tabelas\u0026rdquo;. Ap√≥s essa a√ß√£o, ao efetuar uma nova transa√ß√£o, o Pinpad receber√° a carga de tabelas atualizada, permitindo o funcionamento correto do TEF. Ao utilizar esta fun√ß√£o os seguintes retornos poder√£o ser obtidos: SUCESSO ou FALHA, no formato: [RETORNO]#SUCESSO, [RETORNO]#FALHA. Obs.: Para esta opera√ß√£o n√£o √© necess√°rio chamar a fun√ß√£o FinalizaFuncaoMCInterativo.\nColeta de CPF: Esta fun√ß√£o tem por objetivo de auxiliar a automa√ß√£o, tornando a coleta mais discreta para o cliente, no seu funcionamento o CPF √© inserido, em seguida deve ser confirmado pelo cliente se o mesmo est√° correto. A valida√ß√£o do mesmo deve ser feita pela automa√ß√£o, caso esteja incorreto deve ser solicitado novamente.\nCancelamento e Reimpress√£o: o fluxo destas transa√ß√µes pode ter alguma pequena varia√ß√£o dependendo da operadora (algumas n√£o permitem reimpress√£o), ao utilizar elas para finalizar o fluxo a fun√ß√£o FinalizaFuncaoMCInterativo, deve ser chamada com o comando 98, pois nestas fun√ß√µes n√£o √© realizado desfazimento.\nSele√ß√£o do Dispositivo para Realizar a Transa√ß√£o Caso esteja habilitado o uso da fun√ß√£o POS TEF ser√° poss√≠vel definir em qual dispositivo a transa√ß√£o ser√° realizada, no Pinpad ou no SmartPOS, para isso √© necess√°rio realizar a chamada da fun√ß√£o IniciaFuncaoMCInterativo, preenchendo o par√¢metro sParametro da seguinte forma:\nDispositivo Descri√ß√£o Pinpad LEITOR=1 SmartPOS LEITOR=3 Caso n√£o seja informado nenhum valor ou algum diferente dos mencionados acima, ser√° questionado o dispositivo em que a transa√ß√£o ser√° realizada.\nAguardaFuncaoMCInterativo A fun√ß√£o AguardaFuncaoMCInterativo n√£o possui par√¢metros, ela deve ser chamada continuamente em um la√ßo at√© que o processo da transa√ß√£o seja finalizado, com base em seus retornos ser√£o exibidas mensagens solicitando a intera√ß√£o do operador e do cliente. Cada retorno tem um tratamento diferente, por√©m todos iniciam a string com uma tag informando a a√ß√£o.\nProt√≥tipo da Fun√ß√£o\rBSTR AguardaFuncaoMCInterativo()\rA tag sempre √© no seguinte formato [A√ß√£o] e possui como separador um #, em seguida vem o campo a ser exibido.\nExemplo de Retorno\r[MENU]#MODO#1,1-MAGNETICO/CHIP|2,2-DIGITADO\rObserva√ß√£o: o tipo de retorno √© BSTR, na linguagem que for implementada a utiliza√ß√£o da DLL verifique qual √© a melhor forma de realizar uma poss√≠vel convers√£o.\nTags Retornadas Tag [MENU]\nSolicita a exibi√ß√£o de um menu para o usu√°rio selecionar op√ß√µes relativas √† transa√ß√£o, como tipo de financiamento, op√ß√µes de reimpress√£o, sele√ß√£o de produtos, etc. O formato utilizado √© o seguinte:\nFormato do Retorno\r[MENU]#T√çTULO DO MENU#1,1-OP√á√ÉO 1|2,2-OP√á√ÉO 2\rDescri√ß√£o dos Campos Descri√ß√£o dos Campos T√≠tulo do Menu O t√≠tulo que deve ser exibido na interface 1,1-Op√ß√£o As op√ß√µes do menu s√£o separadas por ‚Äú Para selecionar um item deve ser informado o √≠ndice (valor antes da virgula e n√£o a posi√ß√£o na lista/array com as op√ß√µes). Exemplo de utiliza√ß√£o:\nRetornando para a DLL o valor ‚Äú3‚Äù, ser√° escolhida a op√ß√£o Cr√©dito parcelado loja.\nExemplo de Retorno\r[MENU]#TIPO DE FINCANCIAMENTO#1,1-CREDITO A VISTA|2,2-CREDITO PARCELADO ADM|3,3-CREDITO PARCELADO LOJA\rTag [MSG] Retorna uma mensagem que deve ser exibida pela automa√ß√£o, durante o processo podem ser retornadas mensagens vazias, e estas devem ser desconsideradas. Ao receber esta tag n√£o √© necess√°rio retornar valores para a DLL.\nExemplo de Retorno\r[MSG]#AGUARDE A SENHA [MSG]#CONECTANDO COM O SERVIDOR [MSG]#TRANSACAO APROVADA\rTag [PERGUNTA] Solicita informa√ß√µes para a realiza√ß√£o transa√ß√£o, como n√∫mero de parcelas, valores, data de vencimento, etc. As perguntas podem ter os seguintes tipos de dado INT (inteiro), STRING, DECIMAL e DATE (data).\nEstas s√£o retornadas no seguinte formato:\nFormato do Retorno\r[PERGUNTA]#TEXTO DA PERGUNTA#TIPO DE DADO#TAMANHO MIN√çMO#TAMANHO M√ÅXIMO#VALOR MIN√çMO#VALOR M√ÅXIMO#CASAS DECIMAIS\rDescri√ß√£o dos Campos Descri√ß√£o dos Campos Texto da pergunta A pergunta que deve ser exibida para o usu√°rio. Tipo de Dado Tipo de dado que deve ser utilizado para a valida√ß√£o na resposta. Tamanho M√≠nimo O tamanho m√≠nimo do valor informado, se for 0 n√£o h√° restri√ß√£o. Tamanho M√°ximo O tamanho m√°ximo do valor informado, se for 0 n√£o h√° restri√ß√£o. Valor M√≠nimo Valor m√≠nimo para ser informado, se for 0 n√£o h√° restri√ß√£o. Valor M√°ximo Valor m√°ximo para ser informado, se for 0 n√£o h√° restri√ß√£o. Casas decimais N√∫mero de casas decimais solicitada, se for 0 significa que n√£o est√° solicitando. Para o tipo DATE no tamanho deve ser considerada a m√°scara do campo (caso utilize), ex.: (DD/MM/AA) tem o tamanho 8, valores m√≠nimo e m√°ximo n√£o s√£o retornados.\nA seguir exemplos de perguntas que podem ser retornadas:\nExemplo de Retorno\r[PERGUNTA]#INFORME O NSU#INT#0#0#0,00#0,00#0 [PERGUNTA]#INFORME A DATA DE VALIDADE (MM/AA) #DATE#0#0#0,00#0,00#0 [PERGUNTA]#BOM PARA (DD/MM/AA)#DATE#0#0#0,00#0,00#0 [PERGUNTA]#INFORME O VALOR#DECIMAL#0#0#0,00#0,00#2\rTag [RETORNO] Esta tag indica para a automa√ß√£o que a fun√ß√£o solicitada foi conclu√≠da e os dados retornados podem estar relacionados a transa√ß√µes com cart√£o, Pix, captura de CPF ou relat√≥rio de transa√ß√µes. Assim que recebida deve ser processada para armazenar as informa√ß√µes necess√°rias para a automa√ß√£o e finaliza√ß√£o da transa√ß√£o, al√©m de realizar a impress√£o do comprovante. Seu formato varia de acordo com a transa√ß√£o realizada, a seguir est√° um exemplo de retorno de uma transa√ß√£o com cart√£o.\nExemplo de Retorno\r[RETORNO]#CAMPO0160=CUPOM#CAMPO0002=VALOR#CAMPO0132=COD BANDEIRA#CAMPO0131=COD REDE#CAMPO0135=COD AUTORIZACAO# CAMPO0133=NSU#CAMPO0505=QTDE DE PARCELAS#CAMPO0504=VALOR TAXA SERVICO#CAMPO0136=PRIMEIROS NUMEROS CARTAO# CAMPO1190=ULTIMOS NUMEROS CARTAO#CAMPO0950=CNPJ AUTORIZADORA#CAMPO1003=NOME CLIENTE#CAMPO0134=NSU REDE# CAMPO0513=VENCTO CARTAO#CAMPO122=COMPROVANTE PARA IMPRESSAO UTILIZANDO ‚Äò|‚Äô COMO SEPARADOR |CORTAR# CAMPO0003=NUMERO DE VIAS DO COMPROVANTE#CAMPO9999=NOME DA BANDEIRA#CAMPO9998=NOME DA REDE#CAMPO4221=CARTAO PRE PAGO# CAMPO0101#DESC DO TIPO DE TRANSACAO#CAMPO0121=COMPROV REDUZIDO\rTag [ERROABORTAR] √â retornada quando ocorre algum erro durante a execu√ß√£o, ou quando um comando de cancelamento √© enviado, seja pela automa√ß√£o ou pelo pin pad. Ao receber esta tag, o fluxo deve ser interrompido imediatamente, acionando a fun√ß√£o CancelarFluxoMCInterativo A mensagem informa a raz√£o da interrup√ß√£o do fluxo. Exemplo:\nExemplo de Retorno\r[ERROABORTAR]#CANCELADO PELO OPERADOR [ERROABORTAR]#SEM COMUNICACAO COM O TEF\rTag [ERRODISPLAY] Esta tag indica a ocorr√™ncia de erros no fluxo de transa√ß√£o, frequentemente relacionados com o pin pad ou problemas com o cart√£o. A a√ß√£o a ser tomada ap√≥s recebe-la √© a mesma da tag [ERROABORTAR]: o fluxo deve ser interrompido imediatamente, acionando a fun√ß√£o CancelarFluxoMCInterativo. Exemplos de retorno:\nExemplo de Retorno\r[ERRODISPLAY]#T-14 ERRO PINPAD [ERRODISPLAY]#ERRO AO REALIZAR REIMPRESSAO DA TRANSACAO\rObserva√ß√µes No [RETORNO] o Campo122 cont√©m o comprovante a ser impresso, a palavra CORTAR, ela indica que √© o fim do comprovante, facilitando para a automa√ß√£o imprimir as vias separadamente, realizar o acionamento da guilhotina da impressora ou imprimir uma linha para corte manual.\nQuando a fun√ß√£o possuir um retorno com a tag [MSG], n√£o √© necess√°rio utilizar a fun√ß√£o ContinuaFuncaoMCInterativo, pois a DLL est√° informando o que est√° ocorrendo durante o processo, e a exibi√ß√£o destas mensagens fica a crit√©rio da implementa√ß√£o na automa√ß√£o, assim decide-se quais ser√£o relevantes para a exibi√ß√£o.\nA fun√ß√£o para Coleta de CPF retorna para a automa√ß√£o uma string no seguinte formato [RETORNO]#CPF=12345678912, sendo necess√°rio que a mesma realize a valida√ß√£o do CPF coletado.\nContinuaFuncaoMCInterativo A fun√ß√£o ContinuaFuncaoMCInterativo possui como par√¢metro uma string. A fun√ß√£o deve ser chamada ap√≥s o retorno da AguardaFuncaoMCInterativo para dar continuidade ao processo da transa√ß√£o, quando este conter uma tag que solicita intera√ß√£o ex.: [PERGUNTA], [MENU]; tags como [MSG], [RETORNO] n√£o necessitam que seja chamada a fun√ß√£o.\nProt√≥tipo da Fun√ß√£o\rint ContinuaFuncaoMCInterativo(string sInformacao)\rEsta fun√ß√£o tamb√©m pode ser utilizada para abortar a transa√ß√£o, um cen√°rio de utiliza√ß√£o √© quando o pinpad est√° solicitando que seja inserido o cart√£o e se deseja cancelar o processo, para isso basta fazer a chamada da forma abaixo, em caso de sucesso o retorno ser√° 0, em seguida deve ser aguardado o seguinte retorno:\nExemplo de utiliza√ß√£o\rRetorno = ContinuaFuncaoMCInterativo(‚ÄúABORTAR‚Äù);\rExemplo de Retorno\r[ERROABORTAR]#CANCELADO PELO OPERADOR.\rC√≥digos de Erro Como retorno a fun√ß√£o pode ter os c√≥digos da tabela abaixo, quando for 0 o fluxo continua.\nC√≥digo Descri√ß√£o 0 Retorno OK 1 Erro Gen√©rico na execu√ß√£o 35 Erro interno do ClientD.exe 36 Erro interno do ClientD.exe FinalizaFuncaoMCInterativo A fun√ß√£o FinalizaFuncaoMCInterativo, deve ser chamada ap√≥s a impress√£o do comprovante da transa√ß√£o, ela vai confirmar a transa√ß√£o. Seus par√¢metros, retornos e c√≥digos de erro s√£o id√™nticos a IniciaFuncaoMCInterativo, inclusive os par√¢metros a serem passados devem ser os mesmos com a diferen√ßa que o par√¢metro iComando dever√° ser 98 para confirmar a transa√ß√£o ou 99 se desejar desfazer a transa√ß√£o, e o par√¢metro sNSU √© o que est√° no CAMPO0133 do retorno da transa√ß√£o.\nProt√≥tipo da Fun√ß√£o\rint FinalizaFuncaoMCInterativo(int iComando, string sCnpjCliente, int iParcela, string sCupom, string sValor, string sNsu, string sData, string sNumeroPDV, string sCodigoLoja, int iTipoComunicacao, string sParametro)\rAo utilizar esta fun√ß√£o com o par√¢metro de confirma√ß√£o autom√°tica configurado com o valor N√ÉO ou em uma transa√ß√£o com m√∫ltiplos cart√µes ap√≥s seu retorno √© obrigat√≥rio chamar a AguardaFuncaoMCInterativo para obter o status da confirma√ß√£o ou desfazimento. Este retorno possui o seguinte formato:\nExemplo de Retorno\r[RETORNO]#TRANSACAO NSU=81949 CONFIRMADA COM SUCESSO [RETORNO]#TRANSACAO NSU=81949 HOUVE ERROS AO CONFIRMAR\rAten√ß√£o\nEssa fun√ß√£o deve ser chamada obrigatoriamente. Caso contr√°rio, a transa√ß√£o poder√° ser estornada, pois n√£o ter√° sido devidamente confirmada.\nCancelarFluxoMCInterativo A fun√ß√£o CancelarFluxoMCInterativo, interrompe o processo de transa√ß√£o ela pode ser chamada a qualquer momento, mas √© obrigat√≥rio a sua chamada sempre que retornar as TAG \u0026ldquo;[ERROABORTAR]\u0026rdquo; ou \u0026ldquo;[ERRODISPLAY]\u0026rdquo;. Em caso de sucesso retorna 0, se ocorrer algum erro durante sua execu√ß√£o os c√≥digos ser√£o os mesmos das fun√ß√µes anteriores. Ao utilizar esta fun√ß√£o o fluxo de utiliza√ß√£o da DLL (la√ßo de repeti√ß√£o) deve ser interrompido, pois a fun√ß√£o AguardaFuncaoMCInterativo deixar√° de retornar valores. Para continuar a transacionar se deve reiniciar o processo.\nProt√≥tipo da Fun√ß√£o\rint CancelarFluxoMCInterativo()\rVerificar Status da Transa√ß√£o Esta fun√ß√£o tem por finalidade verificar o status de uma transa√ß√£o realizada; seu uso √© poss√≠vel a partir do momento que √© retornado o NSU da transa√ß√£o; na tabela a seguir est√£o os poss√≠veis status.\nUma recomenda√ß√£o de uso √© realizar esta verifica√ß√£o antes da impress√£o do comprovante para o cliente, criando uma camada extra de seguran√ßa para a correta finaliza√ß√£o da transa√ß√£o.\nStatus 00-APROVADA 77-PENDENTE 78-CANCELADA 86-DESFEITA Para utilizar a fun√ß√£o o fluxo √© basicamente o mesmo de uma venda, deve ser realizada a chamada da fun√ß√£o IniciaFuncaoMCInterativo, com o c√≥digo 700, o NSU retornado, os demais par√¢metros (data, valor, etc.) s√£o os mesmos utilizados para iniciar a transa√ß√£o; em seguida entrar no loop com a fun√ß√£o AguardaFuncaoMCInterativo, at√© obter o retorno que possui o seguinte formato:\nExemplo de chamada\rIniciaFuncaoMCInterativo(700, \u0026#34;12345678000100\u0026#34;, 1, \u0026#34;100\u0026#34;, \u0026#34;50,00\u0026#34;, \u0026#34;110500\u0026#34;, \u0026#34;20250331\u0026#34;, \u0026#34;001\u0026#34;, \u0026#34;123\u0026#34;, 0, \u0026#34;\u0026#34;)\rObs.: N√£o √© necess√°rio utilizar a fun√ß√£o FinalizaFuncaoMCInterativo para concluir o processo de verifica√ß√£o do status.\nComprovante de Transa√ß√£o POS Esta fun√ß√£o tem por finalidade recuperar comprovantes de transa√ß√µes efetuadas em terminais POS da Multiplus Pay ou SmartPOS que utilizam apps da Multiplus Card, para a gera√ß√£o posterior de NFe/NFCe.\nPara utilizar esta fun√ß√£o deve ser realizada a chamada da fun√ß√£o IniciaFuncaoMCInterativo com o c√≥digo de opera√ß√£o 400, e o par√¢metro sParametro com pelo menos a indica√ß√£o de data e hora da transa√ß√£o que deseja obter o comprovante. Na tabela a seguir est√£o os par√¢metros dispon√≠veis para utiliza√ß√£o.\nPar√¢metro Valores Descri√ß√£o Tipo DATAINICIO dd/MM/yyyy Data inicial do per√≠odo a ser consultado M DATAFIM dd/MM/yyyy Data final do per√≠odo a ser consultado M HORAINICIO HH:mm:ss Hora inicial do per√≠odo a ser consultado M HORAFIM HH:mm:ss Hora final do per√≠odo a ser consultado M AUTORIZACAO STRING C√≥digo de autoriza√ß√£o da transa√ß√£o O (M: Mandat√≥rio, O: Opcional)\nCaso n√£o seja informado o C√≥digo de Autoriza√ß√£o da transa√ß√£o, ser√° retornada uma pergunta (tag [PERGUNTA]) para que seja informado, a resposta n√£o √© obrigat√≥ria, pois pode ocorrer uma situa√ß√£o em que esse c√≥digo n√£o esteja dispon√≠vel; contudo haver√° uma filtragem das transa√ß√µes com base no par√¢metro sValor informado. O retorno das transa√ß√µes √© feito atrav√©s da tag [MENU], e sua utiliza√ß√£o √© igual aos demais menus.\nProt√≥tipo da Fun√ß√£o\rIniciaFuncaoMCInterativo(400, ‚Äú12348650000170‚Äù, 1, ‚Äú1‚Äù, ‚Äú1,00‚Äù, ‚Äú1‚Äù, ‚Äú20230706‚Äù, ‚Äú1‚Äù, ‚Äú123‚Äù, 0, ‚ÄúDATAINICIO=10/09/2024;DATAFIM=10/09/2024;HORAINICIO=00:00:00;HORAFIM=23:59:59;AUTORIZACAO=123‚Äù);\rObserva√ß√£o: Para esta fun√ß√£o n√£o √© necess√°ria a realiza√ß√£o da chamada da fun√ß√£o FinalizaFuncaoMCInterativo, pois a mesma n√£o √© pass√≠vel de confirma√ß√£o ou desfazimento.\nRetorno da Transa√ß√£o Ao realizar a consulta se for encontrada apenas 1 (uma) transa√ß√£o e o c√≥digo de autoriza√ß√£o foi informado, n√£o haver√° a exibi√ß√£o de menu, ser√° retornada a tag [RETORNO] contendo os dados da transa√ß√£o e o comprovante, no mesmo formato de uma transa√ß√£o realizada com TEF. Caso existam 1 ou mais ser√° retornado o menu contendo as seguintes informa√ß√µes: Bandeira, Valor, Data e Hora, Parcelas e Status da impress√£o.\nExemplo de Retorno\r[MENU]#INFORME A TRANSACAO DESEJADA PARA A IMPRESSAO DO COMPROVANTE# 1,1-VISA;0,1;09/09/2024 12:21:46;1;IMPRESSO| 2,2-ELO;0,1;09/09/2024 12:26:17;1;NAO IMPRESSO| 3,3-MASTERCARD;0,1;09/09/2024 12:43:52;1;NAO IMPRESSO| 4,4-ELO;0,1;09/09/2024 12:46:19;1;NAO IMPRESSO\rUma vez impresso esse status ser√° alterado, e todas as impress√µes seguintes da mesma transa√ß√£o vir√° com a indica√ß√£o de que se trata de uma Reimpress√£o.\nRelat√≥rio de Transa√ß√µes O Relat√≥rio de Transa√ß√µes permite obter uma lista das transa√ß√µes realizadas durante um per√≠odo espec√≠fico. Sua utiliza√ß√£o segue um fluxo semelhante ao de uma venda, com a diferen√ßa de que se utiliza o par√¢metro sParametro na fun√ß√£o IniciaFuncaoMCInterativo para fornecer os par√¢metros da consulta. Ap√≥s a inicializa√ß√£o deve ser chamada em loop a fun√ß√£o AguardaFuncaoMCInterativo at√© que seja retornada a string contendo a tag [RETORNO] e os dados do relat√≥rio; n√£o √© necess√°ria a utiliza√ß√£o da fun√ß√£o FinalizaFuncaoMCInterativo. A seguir est√° um exemplo de utiliza√ß√£o:\nExemplo de utiliza√ß√£o\rIniciaFuncaoMCInterativo(300, ‚Äú12348650000170‚Äù, 1, ‚Äú1‚Äù, ‚Äú1,00‚Äù, ‚Äú1‚Äù, ‚Äú20230706‚Äù, ‚Äú1‚Äù, ‚Äú123‚Äù, 0, ‚ÄúDATAINICIO=05/07/2023;DATAFIM=05/07/2023;HORAINICIO=00:00:00;HORAFIM=23:59:59;PDV=1;JSON=SIM;PAGINA=1‚Äù);\rPar√¢metros da Consulta Os par√¢metros necess√°rios para realizar a consulta est√£o descritos na tabela a seguir:\nPar√¢metro Valores Descri√ß√£o DATAINICIO dd/MM/yyyy Data inicial do per√≠odo a ser consultado DATAFIM dd/MM/yyyy Data final do per√≠odo a ser consultado HORAINICIO HH:mm:ss Hora inicial do per√≠odo a ser consultado HORAFIM HH:mm:ss Hora final do per√≠odo a ser consultado PDV INT N√∫mero do PDV JSON SIM/NAO Formato de Retorno, SIM retorna em Json, N√ÉO retorna em CSV PAGINA INT N√∫mero da P√°gina caso haja muitas transa√ß√µes, utilizado somente para o formato Json Obs.: Todos os par√¢metros s√£o necess√°rios para realizar a consulta.\nRetorno da Consulta O Relat√≥rio retornado possui os mesmos campos tanto em Json quanto em CSV, com a diferen√ßa que em Json existe a informa√ß√£o da pagina√ß√£o dos resultados. √â recomendado a consulta de per√≠odos n√£o muito longos (superior a 2 dias), assim o processo ser√° conclu√≠do de forma mais r√°pida.\nCampos Retornados Campo Tipo de Dado Descri√ß√£o RedeNome String ServicoDescricao String Ex: Cr√©dito a vista TransacaoNSU String TransacaoDataHoraEstabelecimento DateTime TransacaoDataHoraAdministradora DateTime TransacaoValor Decimal TransacaoValorTaxaServico Decimal TransacaoNumeroCartao String TransacaoCodigoAutorizacao String TransacaoNsuHost String NSU da operadora TransacaoStatus String TransacaoQtdParcelas INT TransacaoTerminal String PaginaAtual INT Informa√ß√µes da pagina√ß√£o UltimaPagina INT Informa√ß√µes da pagina√ß√£o QtdeRegistrosPorPagina INT Informa√ß√µes da pagina√ß√£o Transacoes List Lista contendo as transa√ß√µes Retorno em CSV\rREDENOME;BANDEIRANOME;SERVICODESCRICAO;TRANSACAONSU;TRANSACAODATAHORAESTABELECIMENTO;TRANSACAODATAHORAADMINISTRADORA;TRANSACAOVALOR;TRANSACAOVALORTAXASERVICO;TRANSACAONUMEROCARTAO;TRANSACAOCODIGOAUTORIZACAO;TRANSACAONSUHOST;TRANSACAOSTATUS;TRANSACAOQTDPARCELAS;TRANSACAOTERMINAL NAO INFORMADO;NAO INFORMADO;NAO INFORMADO;000000;12/07/2023 04:01:57;12/07/2023 04:01:57;8,90;0;;010157;000000;58-ERRO AO REALIZAR TRANSACAO;1;001 REDE;MAESTRO;NAO INFORMADO;111018;12/07/2023 04:03:03;12/07/2023 04:03:03;8,90;0;;741052;407003963;00-APROVADA;1;001 REDE;ELECTRON;NAO INFORMADO;111022;12/07/2023 04:17:20;12/07/2023 04:17:20;28,90;0;;312269;164193262;78-CANCELADA;1;001 NAO INFORMADO;NAO INFORMADO;NAO INFORMADO;111022;12/07/2023 04:20:49;12/07/2023 04:20:49;28,90;0;;012049;111022;58-ERRO AO REALIZAR TRANSACAO;1;001 REDE;ELECTRON;NAO INFORMADO;111029;12/07/2023 04:22:54;12/07/2023 04:22:54;28,90;0;;028719;866758376;00-APROVADA;0;001 BB;PIX;PIX;;12/07/2023 11:27:13;12/07/2023 11:27:13;0,02;0;;;;86-DESFEITA;1;160 REDE;MASTERCARD;NAO INFORMADO;111049;12/07/2023 11:36:09;12/07/2023 11:36:09;3,42;0;;083300;044521791;78-CANCELADA;1;001 REDE;MASTERCARD;NAO INFORMADO;111055;12/07/2023 11:38:00;12/07/2023 11:38:00;3,42;0;;503483;756225302;00-APROVADA;0;001\rRetorno em JSON\r{ \u0026#34;PaginaAtual\u0026#34;: 1, \u0026#34;UltimaPagina\u0026#34;: 1, \u0026#34;QtdeRegistrosPorPagina\u0026#34;: 3, \u0026#34;Transacoes\u0026#34;: [ { \u0026#34;RedeNome\u0026#34;: \u0026#34;NAO INFORMADO\u0026#34;, \u0026#34;BandeiraNome\u0026#34;: \u0026#34;NAO INFORMADO\u0026#34;, \u0026#34;ServicoDescricao\u0026#34;: \u0026#34;Nao Informado\u0026#34;, \u0026#34;TransacaoNSU\u0026#34;: \u0026#34;000000\u0026#34;, \u0026#34;TransacaoDataHoraEstabelecimento\u0026#34;: \u0026#34;2023-07-12T04:01:57Z\u0026#34;, \u0026#34;TransacaoDataHoraAdministradora\u0026#34;: \u0026#34;2023-07-12T04:01:57Z\u0026#34;, \u0026#34;TransacaoValor\u0026#34;: 8.9, \u0026#34;TransacaoValorTaxaServico\u0026#34;: 0, \u0026#34;TransacaoNumeroCartao\u0026#34;: null, \u0026#34;TransacaoCodigoAutorizacao\u0026#34;: \u0026#34;010157\u0026#34;, \u0026#34;TransacaoNsuHost\u0026#34;: \u0026#34;000000\u0026#34;, \u0026#34;TransacaoStatus\u0026#34;: \u0026#34;58-ERRO AO REALIZAR TRANSACAO\u0026#34;, \u0026#34;TransacaoQtdParcelas\u0026#34;: 1, \u0026#34;TransacaoTerminal\u0026#34;: \u0026#34;001\u0026#34; }, { \u0026#34;RedeNome\u0026#34;: \u0026#34;NAO INFORMADO\u0026#34;, \u0026#34;BandeiraNome\u0026#34;: \u0026#34;NAO INFORMADO\u0026#34;, \u0026#34;ServicoDescricao\u0026#34;: \u0026#34;Nao Informado\u0026#34;, \u0026#34;TransacaoNSU\u0026#34;: \u0026#34;000000\u0026#34;, \u0026#34;TransacaoDataHoraEstabelecimento\u0026#34;: \u0026#34;2023-07-12T04:02:27Z\u0026#34;, \u0026#34;TransacaoDataHoraAdministradora\u0026#34;: \u0026#34;2023-07-12T04:02:27Z\u0026#34;, \u0026#34;TransacaoValor\u0026#34;: 8.9, \u0026#34;TransacaoValorTaxaServico\u0026#34;: 0, \u0026#34;TransacaoNumeroCartao\u0026#34;: null, \u0026#34;TransacaoCodigoAutorizacao\u0026#34;: \u0026#34;010227\u0026#34;, \u0026#34;TransacaoNsuHost\u0026#34;: \u0026#34;000000\u0026#34;, \u0026#34;TransacaoStatus\u0026#34;: \u0026#34;58-ERRO AO REALIZAR TRANSACAO\u0026#34;, \u0026#34;TransacaoQtdParcelas\u0026#34;: 1, \u0026#34;TransacaoTerminal\u0026#34;: \u0026#34;001\u0026#34; }, { \u0026#34;RedeNome\u0026#34;: \u0026#34;REDE\u0026#34;, \u0026#34;BandeiraNome\u0026#34;: \u0026#34;MAESTRO\u0026#34;, \u0026#34;ServicoDescricao\u0026#34;: \u0026#34;Nao Informado\u0026#34;, \u0026#34;TransacaoNSU\u0026#34;: \u0026#34;111018\u0026#34;, \u0026#34;TransacaoDataHoraEstabelecimento\u0026#34;: \u0026#34;2023-07-12T04:03:03Z\u0026#34;, \u0026#34;TransacaoDataHoraAdministradora\u0026#34;: \u0026#34;2023-07-12T04:03:03Z\u0026#34;, \u0026#34;TransacaoValor\u0026#34;: 8.9, \u0026#34;TransacaoValorTaxaServico\u0026#34;: 0, \u0026#34;TransacaoNumeroCartao\u0026#34;: null, \u0026#34;TransacaoCodigoAutorizacao\u0026#34;: \u0026#34;990052\u0026#34;, \u0026#34;TransacaoNsuHost\u0026#34;: \u0026#34;407623963\u0026#34;, \u0026#34;TransacaoStatus\u0026#34;: \u0026#34;00-APROVADA\u0026#34;, \u0026#34;TransacaoQtdParcelas\u0026#34;: 1, \u0026#34;TransacaoTerminal\u0026#34;: \u0026#34;001\u0026#34; }, ] }\rIntegra√ß√£o com QRMultiplus (PIX) A realiza√ß√£o de transa√ß√µes com o QR Multiplus (PIX) segue um fluxo semelhante ao realizado nas transa√ß√µes com cart√£o. S√£o utilizadas as mesmas fun√ß√µes, diferenciando os c√≥digos de opera√ß√£o (n√£o s√£o os mesmos da transa√ß√£o com cart√£o) e um par√¢metro que deve ser configurado no arquivo CliMC.ini.\nConfigura√ß√£o Antes da utiliza√ß√£o √© necess√°ria a realiza√ß√£o da configura√ß√£o do modo de utiliza√ß√£o, ou seja, a forma de exibi√ß√£o ou retorno dos dados da transa√ß√£o juntamente com o QR Code. O modo de utiliza√ß√£o √© escolhido alterando o par√¢metro ExibirQrCode no arquivo CliMC.ini, na tabela a seguir est√£o os c√≥digos e a descri√ß√£o do modo de exibi√ß√£o. Uma observa√ß√£o deve ser especificada a porta utilizada no Pinpad, e n√£o utilizado o modo procurar autom√°tico.\nC√≥digo Exibi√ß√£o do QR Code 0 Retorno por string para a automa√ß√£o realizar a exibi√ß√£o em uma janela personalizada. 1 Exibe no Pinpad e em uma janela padr√£o. 2 Exibe apenas na janela padr√£o. 3 Exibe apenas no Pinpad. Par√¢metro de Timeout para Exibi√ß√£o do QR Code no Pinpad Se optar pela exibi√ß√£o no Pinpad, √© opcional configurar o tempo de refresh do QR Code na tela do mesmo, com o par√¢metro TimeoutPinPad=N. A partir da vers√£o 1.2023.12.230 do ClientD.exe default √© 8 segundos, sendo desaconselhado tempos inferiores a 3 segundos, pois pode comprometer a leitura do QR Code pelo cliente. A altera√ß√£o desse par√¢metro pode resultar em uma otimiza√ß√£o do tempo necess√°rio para a conclus√£o de uma transa√ß√£o. Caso clientes estejam enfrentando dificuldades na leitura o tempo pode ser aumentado.\nPar√¢metro de Retorno da String do QR Code Para que a automa√ß√£o obtenha a string contendo o QR Code do PIX nos modos de exibi√ß√£o 1, 2 e 3; deve ser adicionado no arquivo CliMC.ini o seguinte par√¢metro:\nCliMC.ini\rRetornaStrQrCode=SIM.\rAp√≥s iniciar o fluxo de transa√ß√£o, assim que for gerada a cobran√ßa a string ser√° retornada para a automa√ß√£o para a automa√ß√£o no formato abaixo. Em seguida, ser√° exibido o QR Code no local configurado.\nExemplo da string retornada\r[MSG]#NSU=900011802|ORIGEM=GERENCIANET|VALOR=20,00| QRCODE=00020101021226830014BR.GOV.BCB.PIX2561qrcodespix.sejaefi.com.br/v2/0f90f0af8523422d9f8025908a127777204000053099865802BR5905EFISA6008SAOPAULO62070000***6304FFE6\rObserva√ß√£o: A string ser√° retornada apena uma vez.\nUtilizando as Fun√ß√µes do QR Multiplus Para realizar uma transa√ß√£o, estorno ou remo√ß√£o da cobran√ßa deve ser chamada a fun√ß√£o IniciaFuncaoMCInterativo, passando como c√≥digo de opera√ß√£o que ser√£o descritos a seguir. Deve ser mantido o mesmo fluxo de leitura e respostas realizado em uma transa√ß√£o de cart√£o utilizando as fun√ß√µes AguardaFuncaoMCInterativo e ContinuaFuncaoMCInterativo; ao final deve ser chamada a fun√ß√£o FinalizaFuncaoMCInterativo, respeitando os c√≥digos 98 se foi realizada e 99 se foi cancelada. Os c√≥digos de erro s√£o os mesmos descritos em se√ß√µes anteriores.\nC√≥digos das Fun√ß√µes Para utilizar o QR Multiplus os c√≥digos das opera√ß√µes s√£o diferentes dos utilizadas para uma transa√ß√£o com TEF.\nC√≥digo Fun√ß√£o 50 Retorna um Menu com as op√ß√µes de PSP para realizar a cobran√ßa 51 Realiza a cobran√ßa com o PSP padr√£o configurado para o Cliente 52 Realiza a Cobran√ßa com Mercado Pago 53 Realiza a Cobran√ßa com PicPay 54 Cancelar/Estorno Transa√ß√£o 55 Remover Transa√ß√£o 56 Status da Transa√ß√£o 59 Reimpress√£o de Comprovante Fluxo de Utiliza√ß√£o Cria√ß√£o da Cobran√ßa Esta fun√ß√£o gera uma cobran√ßa com o QR Multiplus, que pode ser o PIX no PSP padr√£o do cliente ou uma das carteiras digitais dispon√≠veis. Para isso basta escolher uma das opera√ß√µes dispon√≠ves para cria√ß√£o: 50, 51, 52 ou 53; em seguida com o uso da fun√ß√£o IniciaFuncaoMCInterativo dar in√≠cio ao processo.\nRetornos da Fun√ß√£o Durante o fluxo a fun√ß√£o AguardaFuncaoMCInterativo retornar√° o local onde est√° sendo exibido o qr code para realizar o pagamento.\nExemplos de Retorno\r[MSG]#AGUARDANDO PAGAMENTO ‚Äì PINPAD [MSG]#AGUARDANDO PAGAMENTO ‚Äì FRENTE DE CAIXA [MSG]#AGUARDANDO PAGAMENTO ‚Äì TELA E PINPAD\rObserva√ß√£o: Quando utilizado o Pix da Multiplus Pay, antes de retornar o qr code para o local configurado, ser√° solicitado o telefone do cliente, o mesmo deve ser devolvido para DLL atrav√©s da fun√ß√£o ContinuaFuncaoMCInterativo, com o seguinte formato: (00)00000-0000;\nSolicita√ß√£o de telefone\r[PERGUNTA]#SOLICITE O TELEFONE DO CLIENTE\rImpress√£o do QR Code Na tela de exibi√ß√£o padr√£o existe a possibilidade de realizar a impress√£o do QR Code para o cliente; em sua primeira utiliza√ß√£o √© necess√°rio definir qual ser√° a impressora padr√£o, para isso √© exibida a caixa de sele√ß√£o da imagem a seguir.\nCaso seja necess√°ria a redefini√ß√£o da impressora o par√¢metro NomeImpressora deve ser apagado do arquivo CliMC.ini.\nCliMC.ini\rPorta=3 MensagemPadrao=MUTLIPLUS CARD TransacoesAdicionaisHabilitadas=29 ConfirmacaoAutomatica=SIM NomeImpressora=Microsoft Print to PDF\rCancelamento/Estorno Esta fun√ß√£o realiza o cancelamento/estorno de uma cobran√ßa com o QR Multiplus, por quest√µes de seguran√ßa transa√ß√µes com a Multiplus Pay n√£o podem ser canceladas desta maneira.\nRemo√ß√£o da Cobran√ßa Esta fun√ß√£o realiza a remo√ß√£o de uma cobran√ßa com o QR Multiplus, para que no relat√≥rio de transa√ß√µes n√£o existam valores pendentes de recebimento. Seu uso se d√° no cen√°rio, onde o cliente desistiu de utilizar a forma de pagamento, ou houve um cancelamento do processo de venda. No fluxo de utiliza√ß√£o ao realizar um cancelamento na tela padr√£o ou no Pinpad, esta opera√ß√£o √© feita automaticamente; caso esteja sendo utilizada o retorno por string, ou a aplica√ß√£o ClientD.exe seja encerrada de forma inesperada, essa fun√ß√£o deve ser chamada antes de iniciar novamente o ciclo da transa√ß√£o, informando no campo NSU, o c√≥digo da cobran√ßa retornado inicialmente.\nStatus da Cobran√ßa Esta fun√ß√£o retorna o status de uma cobran√ßa (APROVADA, PENDENTE, CANCELADA, DESFEITA), e tamb√©m outros detalhes relativos a ela como c√≥digo, NSU, valor, PSP de origem, Identifica√ß√£o do pagamento e data/hora.\nReimpress√£o do Comprovante Esta fun√ß√£o reimprime o comprovante da transa√ß√£o com o NSU informado, al√©m do comprovante tamb√©m s√£o retornados os mesmos campos com os dados da transa√ß√£o.\nRetorno da Transa√ß√£o As informa√ß√µes de retorno de uma transa√ß√£o efetuada por meio do QR Multiplus seguem o padr√£o das transa√ß√µes com cart√£o. Nem todos os campos s√£o utilizados, uma vez que o tipo de transa√ß√£o difere. Al√©m disso, h√° um campo adicional no retorno, denominado CAMPO2620. Esse campo corresponde √† identifica√ß√£o do pagamento (E2E) e cont√©m uma sequ√™ncia alfanum√©rica de 32 caracteres. Essa informa√ß√£o √© empregada em determinadas Unidades Federativas (UFs) para a gera√ß√£o da NFCe (Nota Fiscal de Consumidor eletr√¥nica).\nO CAMPO0121 tamb√©m √© retornado contendo o comprovante reduzido da transa√ß√£o.\nExemplo de Retorno\r[RETORNO]#CAMPO0160=1000#CAMPO0002=0,02#CAMPO0132=000#CAMPO0131=000#CAMPO0133=955801668# CAMPO0135=955801668#CAMPO0505=1#CAMPO0504=0.00#CAMPO0136=000000XXXXXX0000#CAMPO1190=0000# CAMPO0950=#CAMPO1003=SEM NOME#CAMPO0134=955801668#CAMPO0513=00/00# CAMPO122= VENDA PIX| | TEF EXPRESS| |DATA: 2023-08-29 12:22:19| AUT: 955801668|NSU: 955801668|ID PGTO: E18236170601304201626s0305512762 | VALOR TOTAL: R$ 10,00| | CUPOM FISCAL: 1000 PDV: 001|CNPJ EMITENTE: 60.177.876/0001-30|29/08/2023 09:22:22|CORTAR# CAMPO2620=E18236170601304201626s0305512762#CAMPO0121= VENDA PIX\t29/08/2023 09:22:22| NSU: 955801668\tAUT: 955801668|VALOR: R$ 10,00|ID PGTO: E18236170601304201626s0305512762| CUPOM FISCAL: 1000|\tPDV: 001|CNPJ EMITENTE: 60.177.876/0001-30\rRestri√ß√µes de Utiliza√ß√£o Atualmente a exibi√ß√£o do QR Code no Pinpad, est√° dispon√≠vel somente para o modelo Gertec PPC 930, os demais n√£o s√£o suportados. Se n√£o estiver dispon√≠vel este Pinpad, n√£o utilize as op√ß√µes de exibi√ß√£o 1 e 3, pois ocorrer√° falha na gera√ß√£o do QR Code.\nObserva√ß√µes Sobre o Fluxo de Transa√ß√£o Durante o processo de realizar uma transa√ß√£o com PIX, pode ocorrer o seguinte cen√°rio: o cliente efetua o pagamento e recebe o comprovante de que o mesmo foi enviado ao PSP do estabelecimento. No entanto, o QR Code ainda permanece vis√≠vel. Caso n√£o haja resposta ap√≥s um per√≠odo de espera de aproximadamente 2 minutos, o operador do caixa opta por cancelar a transa√ß√£o. Nesse momento, podem ocorrer duas situa√ß√µes distintas:\nPrimeira situa√ß√£o: Mesmo ap√≥s o cancelamento, o comprovante de pagamento √© recebido.\nSegunda situa√ß√£o: O processo √© encerrado sem o retorno do comprovante.\nSe a segunda situa√ß√£o ocorrer e o sistema n√£o tiver armazenado o c√≥digo da transa√ß√£o, √© necess√°rio acessar o Portal do Cliente para visualizar a transa√ß√£o e obter o c√≥digo, possibilitando o estorno. Em seguida, o processo de pagamento deve ser repetido para finalizar o fluxo de venda corretamente. Outra op√ß√£o √© implementar a fun√ß√£o \u0026ldquo;Relat√≥rio de Transa√ß√µes\u0026rdquo; no PDV, o que permitir√° obter diretamente todas as transa√ß√µes realizadas e automatizar o processo de identifica√ß√£o da transa√ß√£o PIX realizada de forma incompleta.\nA explica√ß√£o para situa√ß√µes como esta ocorrer pode ocorrer devido ao tempo de resposta dos PSPs ou momentos de alta demanda de transa√ß√µes. Garantindo o acesso ao Portal do Cliente ou a implementa√ß√£o do Relat√≥rio de Transa√ß√µes √© poss√≠vel lidar com essa inconveni√™ncia de maneira eficiente e garantir a conclus√£o adequada da transa√ß√£o PIX.\nIntegra√ß√£o com o App PinPDV Lite Fun√ß√µes de Pinpad C√≥digos de Erro Solu√ß√£o de Problemas ","date":"2023-09-07","id":2,"permalink":"/pt/documentacao/tef/dll/dlltransparente/","summary":"\u003cp\u003eA DLL \u003cstrong\u003eTefClientMC\u003c/strong\u003e proporciona uma integra√ß√£o flex√≠vel, permitindo √† automa√ß√£o um alto n√≠vel de controle sobre o fluxo da transa√ß√£o e ampla personaliza√ß√£o por meio de um processo iterativo. √â ideal para automa√ß√µes que buscam preservar sua identidade visual e ter maior controle sobre cada etapa da transa√ß√£o.\u003c/p\u003e","tags":[],"title":"DLL TefClientMC - Modo Interativo (DLL Transparente)"},{"content":"Integra√ß√£o com a DLL TefCLientMC Modo Client\n","date":"2023-09-07","id":3,"permalink":"/pt/documentacao/tef/dll/dllcomtela/","summary":"\u003cp\u003eIntegra√ß√£o com a DLL TefCLientMC Modo Client\u003c/p\u003e","tags":[],"title":"DLL TefClientMC (Modo Client)"},{"content":"Nossas Solu√ß√µes de Integra√ß√£o A Multiplus Card oferece diversas op√ß√µes de integra√ß√£o para atender √†s diferentes necessidades do seu sistema:\nTEF Dial ‚Äì Solu√ß√£o baseada em troca de arquivos para a comunica√ß√£o com o TEF. DLL Modo Client ‚Äì Integra√ß√£o direta via DLL, permitindo comunica√ß√£o eficiente entre sua aplica√ß√£o e os servi√ßos da Multiplus Card. DLL Modo Interativo ‚Äì Solu√ß√£o que possibilita uma intera√ß√£o mais flex√≠vel entre seu sistema e o processo de pagamento. Web Service ‚Äì API baseada em HTTP para integra√ß√£o com sistemas web e aplica√ß√µes em nuvem. QRMultiplus (PIX) ‚Äì Pagamentos via QR Code utilizando a tecnologia PIX. LinkPago (Gateway de Pagamento) ‚Äì Integra√ß√£o com o gateway de pagamento da Multiplus Card para diversas formas de pagamento. Conciliador ‚Äì Ferramenta para confer√™ncia e concilia√ß√£o financeira das transa√ß√µes realizadas. ","date":"2023-09-07","id":4,"permalink":"/pt/documentacao/","summary":"\u003ch2 id=\"nossas-solu√ß√µes-de-integra√ß√£o\"\u003eNossas Solu√ß√µes de Integra√ß√£o\u003c/h2\u003e\n\u003cp\u003eA Multiplus Card oferece diversas op√ß√µes de integra√ß√£o para atender √†s diferentes necessidades do seu sistema:\u003c/p\u003e","tags":[],"title":"Documenta√ß√£o"},{"content":"","date":"2023-09-07","id":5,"permalink":"/pt/exemplos/","summary":"","tags":[],"title":"Exemplos"},{"content":"","date":"2023-09-07","id":6,"permalink":"/pt/faq/","summary":"","tags":[],"title":"FAQ"},{"content":"","date":"2023-09-07","id":7,"permalink":"/pt/documentacao/pinpdv/","summary":"","tags":[],"title":"PinPDV"},{"content":"","date":"2023-09-07","id":8,"permalink":"/pt/documentacao/pinpdv/pinpdv/","summary":"","tags":[],"title":"PinPDV"},{"content":"","date":"2023-09-07","id":9,"permalink":"/pt/documentacao/qrmultiplus/","summary":"","tags":[],"title":"QRMultiplus"},{"content":"Integra√ß√£o com QRMultiplus por API\n","date":"2023-09-07","id":10,"permalink":"/pt/documentacao/qrmultiplus/qrmultiplus/","summary":"\u003cp\u003eIntegra√ß√£o com QRMultiplus por API\u003c/p\u003e","tags":[],"title":"QRMultiplus"},{"content":"","date":"2023-09-07","id":11,"permalink":"/pt/documentacao/tef/","summary":"","tags":[],"title":"TEF"},{"content":"Forma de integra√ß√£o utilizando troca de arquivos entre a Automa√ß√£o e o Gerenciador de Pagamentos (Gerenciador Padr√£o) da Multiplus Card.\n","date":"2023-09-07","id":12,"permalink":"/pt/documentacao/tef/tefdial/","summary":"\u003cp\u003eForma de integra√ß√£o utilizando troca de arquivos entre a Automa√ß√£o e o Gerenciador de Pagamentos (Gerenciador Padr√£o) da Multiplus Card.\u003c/p\u003e","tags":[],"title":"Tef Dial (Troca de Arquivos)"},{"content":"Teste teste\n","date":"2023-09-07","id":13,"permalink":"/pt/documentacao/tef/tefdial/trocaarquivos/","summary":"\u003cp\u003eTeste teste\u003c/p\u003e","tags":[],"title":"Tef Dial (Troca de Arquivos)"},{"content":"","date":"2023-09-07","id":14,"permalink":"/pt/tutoriais/","summary":"","tags":[],"title":"Tutoriais"},{"content":"","date":"2023-09-07","id":15,"permalink":"/pt/documentacao/tef/webservice/","summary":"","tags":[],"title":"Webservice"},{"content":"","date":"2023-09-07","id":16,"permalink":"/pt/documentacao/tef/webservice/webservice/","summary":"","tags":[],"title":"WebService"},{"content":"","date":"0001-01-01","id":17,"permalink":"/pt/categories/","summary":"","tags":[],"title":"Categories"},{"content":"","date":"0001-01-01","id":18,"permalink":"/pt/contributors/","summary":"","tags":[],"title":"Contributors"},{"content":"","date":"0001-01-01","id":19,"permalink":"/pt/tags/","summary":"","tags":[],"title":"Tags"}]